<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rincón Inalámbrico - Crear Cuenta</title>
    <link rel="stylesheet" href="css/registrar.css">
</head>

<body>
    <div class="container" id="container">
        <div class="header">
            <img src="img/logoRincon.webp" alt="Logo Rincón Inalámbrico" class="logo"
                style="width: 280px; height: 280px;">
            <h1>Rincón Inalámbrico</h1>
            <p>Crear cuenta</p>
        </div>

        <div class="form-container">
            <!--Nombre-->
            <div class="form-group">
                <label for="nombre">Nombre *</label>
                <input type="text" id="nombre" placeholder="Ingresa tu nombre">
            </div>

            <!--Apellido-->
            <div class="form-group">
                <label for="apellido">Apellido *</label>
                <input type="text" id="apellido" placeholder="Ingresa tu apellido">
            </div>

            <!--Email-->
            <div class="form-group">
                <label for="email">Email *</label>
                <input type="email" id="email" placeholder="example@gmail.com">
            </div>
            <!--Telefono-->
            <div class="form-group">
                <label for="telefono">Teléfono *</label>
                <input type="tel" id="telefono" placeholder="+56 9 1234 5678">
            </div>
            <!--Contraseña-->
            <div class="form-group">
                <label for="password">Contraseña *</label>
                <input type="password" id="password" placeholder="Crea una contraseña segura">
            </div>
            <!--Confirmar Contraseña-->
            <div class="form-group">
                <label for="confirm-password">Confirmar Contraseña *</label>
                <input type="password" id="confirm-password" placeholder="Repite tu contraseña">
            </div>
            <!--Dirección-->
            <div class="form-group">
                <label for="direccion">Dirección</label>
                <input type="text" id="direccion" placeholder="Tu dirección completa">
            </div>
            <!--Ciudad y Código Postal-->
            <div class="form-group">
                <label for="ciudad">Ciudad</label>
                <input type="text" id="ciudad" placeholder="Ciudad de residencia">
            </div>
            <!--Codigo Postal-->
            <div class="form-group">
                <label for="codigo-postal">Código Postal</label>
                <input type="text" id="codigo-postal" placeholder="Código postal">
            </div>
        </div>
        <form onsubmit="return validateForm()" action="index.html">
            <div class="form-container">
            </div>
            <div class="submit">
                <button class="btn" type="submit">Crear Cuenta</button>
                <p class="warnings" id="warnings"></p>
            </div>
        </form>


        <div class="footer">
            ¿Ya tienes una cuenta? <a href="login.html">Inicia sesión</a>
        </div>
    </div>
    <!--Boton retorno-->
    <div>
        <a href="index.html">
            <img src="img/boton retornar.png" alt="retorno" width="50" height="50"
                style="position: fixed; bottom: 10px; left: 10px; cursor: pointer;">
        </a>
    </div>

    <script>
        // funcion para validar formulario
   
        function validateForm() {
            const nombre = document.getElementById('nombre').value.trim();
            const apellido = document.getElementById('apellido').value.trim();
            const email = document.getElementById('email').value.trim();
            const telefono = document.getElementById('telefono').value.trim();
            const password = document.getElementById('password').value;
            const confirmPassword = document.getElementById('confirm-password').value;
            const direccion = document.getElementById('direccion').value.trim();
            const ciudad = document.getElementById('ciudad').value.trim();
            const codigo = document.getElementById('codigo-postal').value.trim();
            
            const btn = document.getElementById('btn');

            // Mostrar advertencia
            const warningsElement = document.getElementById('warnings');

            // Validar que no esten vacios
            if (!nombre || !apellido || !email || !telefono || !password || !confirmPassword) {
                warningsElement.textContent = "Por favor, complete todos los campos obligatorios marcados con *";

                // Resaltar campos vacíos
                if (!nombre) document.getElementById('nombre').classList.add('error-input');
                if (!apellido) document.getElementById('apellido').classList.add('error-input');
                if (!email) document.getElementById('email').classList.add('error-input');
                if (!telefono) document.getElementById('telefono').classList.add('error-input');
                if (!password) document.getElementById('password').classList.add('error-input');
                if (!confirmPassword) document.getElementById('confirm-password').classList.add('error-input');
                if (!direccion) document.getElementById('direccion').classList.add('error-input');
                if (!ciudad) document.getElementById('ciudad').classList.add('error-input');
                if (!codigo) document.getElementById('codigo-postal').classList.add('error-input');

                return false;


                // Validar formato de email
            } else if (!email.includes('@')) {
                warningsElement.textContent = "Por favor, ingrese un email válido (debe contener @)";
                document.getElementById('email').classList.add('error-input');
                return false;


                // validar que las contraseñas sean las mismas
            } else if (password !== confirmPassword) {
                warningsElement.textContent = "Las contraseñas no coinciden";
                document.getElementById('password').classList.add('error-input');
                document.getElementById('confirm-password').classList.add('error-input');
                return false;
            } else {
                var valido = true;
            }

            // Validar longitud de contraseña
            if (password.length < 6) {
                warningsElement.textContent = "La contraseña debe tener al menos 6 caracteres";
                document.getElementById('password').classList.add('error-input');
                document.getElementById('confirm-password').classList.add('error-input');
                return false;
            }

            //Para validar que el telefono no sea un String
            function esNumerico(dato) {
                return /^\d+$/.test(dato); 
            }  

            let telefonoSinEspacios = telefono.replace(/\s+/g, '');
            if (!esNumerico(telefonoSinEspacios)) {
                warningsElement.textContent = "El teléfono debe contener solo números";
                document.getElementById('telefono').classList.add('error-input');
                return false;
            }
            //para validar longitud de telefono
            if (telefonoSinEspacios.length > 8|| telefonoSinEspacios.length < 8) {
                warningsElement.textContent = "El teléfono debe tener entre 8 dígitos";
                document.getElementById('telefono').classList.add('error-input');
                return false;
            }

            //Para validar codigo postal
            let codigoSinEspacios = codigo.replace(/\s+/g, '');
            if (codigo && !esNumerico(codigoSinEspacios)) {
                warningsElement.textContent = "El código postal debe contener solo números";
                document.getElementById('codigo-postal').classList.add('error-input');
                return false;
            }
            
            if (valido) {
                System.out.println("Es válido");
            } else {
                System.out.println("Es inválido");
            }
            // Si no encuentra errores
            warningsElement.textContent = "";
            alert("¡Cuenta creada con éxito! Será redirigido a la página de inicio.");
            window.location.href = "index.html";
            // Aquí normalmente redirigirías o enviarías el formulario
            // window.location.href = "index.html";

            return true;
        }

        // Quitar el estilo de error cuando el usuario comience a escribir
        const inputs = document.querySelectorAll('input');
        inputs.forEach(input => {
            input.addEventListener('input', function () {
                this.classList.remove('error-input');
                document.getElementById('warnings').textContent = "";
            });
        });
    </script>
</body>

</html>